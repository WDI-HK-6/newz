app.controller('HomeCtrl', ['$scope', '$http', '$rootScope', function($scope, $http, $rootScope ){

  $scope.feature = {
    heading: "Your heading",
    author: "author (you)",
    article_text: "Put a birthday message here"
  };
  $scope.card = {
    date: new Date()
  }

  $scope.selectDate = function(date) {
    console.log("date has been selected");
    console.log(date);
    year = moment(date).format('YYYY');
    console.log(year);
    $http.get('movies/' + year + '.json').success(function(data){
      console.log(data);
      $scope.card.movie = data.movie[0];
      $scope.card.producers = data.movie[1];
      $scope.card.nominees = data.movie[2];
    })
  }

  $scope.repack = function() {
    $scope.$container.packery();
  }

  $scope.$container = $('#container');
  // init
  $scope.$container.packery({
    itemSelector: '.item',
    // columnWidth: 80,
    // rowHeight: 80
  });

  $scope.$container.find('.item').each( function( i, itemElem ) {
    // make element draggable with Draggabilly
    var draggie = new Draggabilly( itemElem );
    // bind Draggabilly events to Packery
    $scope.$container.packery( 'bindDraggabillyEvents', draggie );
  });

}])

